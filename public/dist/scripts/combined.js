var serverUrl="dummy";angular.module("gunt",["ngMaterial","ui.router","googleplus","ngStorage"]).config(["$stateProvider","$urlRouterProvider","GooglePlusProvider",function(o,e,r){e.otherwise("/app/game/one"),o.state("app",{url:"/app",templateUrl:"modules/start/start.html",controller:"startController",abstract:!0}).state("app.scoreboard",{url:"/scoreboard",templateUrl:"modules/scoreboard/scoreboard.html",controller:"scoreController"}).state("app.game",{url:"/game",templateUrl:"modules/game/game.html",controller:"gameController",abstract:!0}).state("app.game.dummy",{url:"/dummy",templateUrl:"modules/game/dummy.html",controller:"dummyController"}).state("app.game.one",{url:"/one",templateUrl:"modules/game/one.html",controller:"oneController"}),r.init({clientId:"244830570730-3e20m76uc4q9pnkkusljpmq6qnur472d.apps.googleusercontent.com",apiKey:"AIzaSyD98IUTYTnag2GoQsINaujL7kfLQxh76H4"})}]),angular.module("gunt").factory("mainFactory",["$http","$location",function(o,e){var r={};return serverUrl=e.$$protocol+"://"+e.$$host+":"+e.$$port,r.login=function(e){return o({method:"GET",url:serverUrl+"/player",params:{id:e.id}})},r.checkAnswer=function(o,e){},r.addPlayer=function(e){return o({method:"PUT",url:serverUrl+"/player",data:{player:e}})},r}]),angular.module("gunt").controller("gameController",["$scope","mainFactory","$localStorage","$state",function(o,e,r,t){levelToState=["app.game.dummy","app.game.one"],o.userLevel=0,o.gotoLevel=function(r){e.login(r).then(function(e){o.userLevel=e.data.level,t.go(levelToState[o.userLevel])}).catch(function(o){console.log(o)})},r.guntUser&&o.gotoLevel(r.guntUser)}]).controller("dummyController",["$scope","mainFactory",function(o,e){}]).controller("oneController",["$scope","mainFactory",function(o,e){}]),angular.module("gunt").controller("scoreController",["$scope","mainFactory",function(o,e){}]),angular.module("gunt").controller("startController",["$scope","mainFactory","$localStorage","$mdDialog","GooglePlus",function(o,e,r,t,n){o.showMessage=function(o,e){t.show(t.alert().clickOutsideToClose(!0).title(o).textContent(e).ok("Okay"))},o.showError=function(e){if(e&&e.error){switch(e.error.code){case 11e3:o.showMessage("Error","Sorry, the avatar name is not available");break;case 10:case 20:o.showMessage("Error",e.error.errmsg);break;default:o.showMessage("Error","There was an error : "+(e?JSON.stringify(e):"Unknown Error"))}11e3==e.error.code||10==e.error.code&&o.showMessage("Error",e.error.errmsg)}o.showMessage("Error","There was an error : "+(e?JSON.stringify(e):"Unknown Error"))},o.showPrompt=function(o,e,r){var n=t.prompt().title(o).textContent(e).placeholder(r).ariaLabel(r).ok("Okay").cancel("Cancel");return t.show(n)},o.loginAction=r.guntUser?"Logout":"Login",o.login=function(){r.guntUser?(r.guntUser=null,o.loginAction="Login",n.logout()):n.login().then(function(t){n.getUser().then(function(t){e.login(t).success(function(n){n?(o.loginAction="Logout",r.guntUser={id:t.id,name:n.name}):o.showPrompt("Create Avatar","Please enter a name for your character","avatar name").then(function(n){t.name=n,e.addPlayer(t).success(function(e){o.loginAction="Logout",r.guntUser={id:t.id,name:t.name}}).error(function(e){console.log(e),o.showError(e)})},function(){})}).error(function(o){console.log(o)})})},function(e){console.log(e),o.showError(e)})}}]);